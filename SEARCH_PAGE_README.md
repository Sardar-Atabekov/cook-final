# Страница поиска рецептов

## Обзор

Создана новая страница поиска с поддержкой SSR, SEO и URL параметров. Страница доступна по адресу `/[locale]/search` и поддерживает различные параметры поиска через URL.

## Функциональность

### URL параметры

Страница поддерживает следующие URL параметры:

- `q` - поисковый запрос (текстовый поиск)
- `ingredients` - список ID ингредиентов через запятую
- `mealType` - тип блюда (breakfast, lunch, dinner, snack, all)
- `country` - страна происхождения (Italy, China, Mexico, USA, India, France, all)
- `dietTags` - диетические теги через запятую (vegetarian, vegan, gluten-free, dairy-free, low-carb, healthy)
- `page` - номер страницы (по умолчанию 1)

### Примеры URL

```
/en/search?q=pasta
/en/search?ingredients=1,2,3&mealType=dinner
/ru/search?q=курица&country=Italy&dietTags=vegetarian,healthy
/en/search?q=salad&page=2
```

### SSR и SEO

- **SSR**: Начальные данные загружаются на сервере для первой страницы
- **SEO**: Динамические мета-теги в зависимости от параметров поиска
- **Кэширование**: Страница кэшируется на 1 час для ускорения загрузки
- **Sitemap**: Страница поиска добавлена в sitemap.xml

### Компоненты

1. **SearchPage** (`src/app/[locale]/search/page.tsx`) - серверный компонент
2. **SearchPageClient** (`src/components/search-page-client.tsx`) - клиентский компонент
3. **SearchRecipeCard** (`src/components/search-recipe-card.tsx`) - карточка рецепта для поиска
4. **SearchBar** (обновлен) - поисковая строка с поддержкой начального значения

### Переводы

Добавлены переводы для страницы поиска в:

- `src/locales/en.json` - английский
- `src/locales/ru.json` - русский

## Использование

### Навигация

```typescript
// Программная навигация с параметрами
router.push('/en/search?q=pasta&mealType=dinner');

// С параметрами ингредиентов
router.push('/en/search?ingredients=1,2,3');
```

### Синхронизация с URL

Все изменения поиска автоматически синхронизируются с URL:

- Поисковый запрос
- Фильтры (тип блюда, страна, диетические теги)
- Выбранные ингредиенты
- Номер страницы

### Состояния

Страница корректно обрабатывает различные состояния:

- Загрузка (скелетон)
- Ошибка сети
- Пустые результаты
- Успешные результаты с пагинацией

## Технические детали

### SSR данные

На сервере загружаются:

- Категории ингредиентов
- Начальные рецепты (только для первой страницы)
- Мета-теги для SEO

### Клиентская логика

- Синхронизация с URL параметрами
- Управление состоянием поиска
- Пагинация
- Сохранение/удаление рецептов
- Добавление ингредиентов в кладовую

### Производительность

- Кэширование на 1 час
- Ленивая загрузка рецептов
- Оптимизированные изображения
- Минимальные ре-рендеры

## Миграция

### Замена старой страницы

Старая страница `src/app/[locale]/search/page.jsx` заменена на новую TypeScript версию с полной поддержкой URL параметров.

### Обратная совместимость

Новая страница полностью совместима с существующими компонентами:

- IngredientSidebar
- RecipeFilters
- useRecipes hook
- Zustand stores

## Тестирование

### URL тестирование

Проверьте работу следующих URL:

1. `/en/search` - пустая страница поиска
2. `/en/search?q=pasta` - поиск по тексту
3. `/en/search?ingredients=1,2,3` - поиск по ингредиентам
4. `/en/search?q=salad&mealType=lunch&country=Italy` - поиск с фильтрами
5. `/en/search?q=chicken&page=2` - вторая страница результатов

### SEO тестирование

Проверьте мета-теги для разных URL:

- Заголовок страницы
- Описание
- Open Graph теги
- Twitter Card теги

## Будущие улучшения

1. **Аналитика**: Добавить отслеживание поисковых запросов
2. **Кэширование**: Реализовать более продвинутое кэширование результатов
3. **Автодополнение**: Добавить подсказки при поиске
4. **Фильтры**: Расширить набор фильтров (время приготовления, сложность)
5. **Сортировка**: Добавить различные варианты сортировки результатов
